/*
		Fonction générant une requête javascript Asynchrone pour rajouter une nouvelle conversation dans le base de données
*/
function creer_conversation(user)
{
var invites=[];
$("input:checked[name=invites]").each(function(){
	invites.push($(this).val());
});

alert(JSON.stringify(invites));

var xhr_object = null; 
	     
	// Cas des navigateurs de type Netscape (Firefore, Conqueror, etc.)
	if(window.XMLHttpRequest) 
	   	xhr_object = new XMLHttpRequest(); 
	// Cas du navigateur Internet Explorer
	else if(window.ActiveXObject)
	  	 xhr_object = new ActiveXObject("Microsoft.XMLHTTP");
	// Cas des navigateurs ne comprenant pas cette technologie (anciens navigateurs)
	else { 
			// XMLHttpRequest non supporté par le navigateur 
	 		alert("Votre navigateur ne supporte pas les objets XMLHTTPRequest..."); 
    	return; 
	} 
	 
	xhr_object.open("GET", "php/creer_conversation.php?user="+user+"&invites="+invites, true);
	

	xhr_object.onreadystatechange = function() { 
			// Etat : requête terminée, réponse récupérée
	  	if(xhr_object.readyState == 4) {
				//alert(xhr_object.responseText); // DEBUG MODE
		 	}
			return xhr_object.readyState;
	} 
	xhr_object.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
	
	//  Envoi de la requête
	xhr_object.send(null);
	//window.location.reload();
}
